$(function(){function t(t){var i={goods_id:t,flag:17,request_type:4,success_function:o,error_function:n,timeout_function:a,get_pay_success_callback:e};cart.qrPay(i)}function o(t,o){d?i("payCode",o.pay_url):i("payCodeImg",o.pay_url)}function e(){s.boxshadow.fadeOut(function(){showToast({text:"支付成功",bottom:"10%",zindex:9e3,speed:500,time:1500}),s.payCode.fadeOut(function(){window.location.reload()})})}function n(t){showToast({text:t.errorMessage,bottom:"10%",zindex:9e3,speed:500,time:1500})}function a(){d?s.payCode.find("#payCode").html(l):s.getPay.find("#payCodeImg").html(r)}function i(t,o){var e=qrcode(6,"M");e.addData(o),e.make(),$("#"+t).html(e.createImgTag(3,3)),$("#"+t).html($("#"+t).html()),d&&s.boxshadow.fadeIn(function(){s.payCode.fadeIn()})}$(document).on("click",".tip-subscribe-column>span",function(){$(this).parent().find(".tip").fadeIn()}),$(document).on("click",".tip-subscribe-column .bt-close",function(){$(".tip-subscribe-column").find(".tip").fadeOut()});var c="",s={boxshadow:$(".skin-boxshadow"),btClose:$(".bt-close"),payCode:$(".pay-code"),btSubscribe:$(".bt-subscribe-article"),btSubscribeColumn:$(".bt-subscribe-text"),getPay:$(".get-pay")},d=!1,u=window.location.href;u.indexOf("category_")>-1&&!d&&getCookie("UserName")&&s.btSubscribeColumn.length&&t(s.getPay.data("id")),$(document).on("click",".bt-subscribe",function(){getCookie("UserName")||window.csdn.loginBox.show()}),s.getPay.on("click",function(){d=!1,c=$(this).data("id"),t(c)}),$(document).on("click",".bt-subscribe-article",function(){d=!0,$(".pay-money-span").text($(".pay-money-span").data("nowprice")),getCookie("UserName")?(c=$(this).data("id"),t(c)):window.csdn.loginBox.show()}),$(document).on("click","#bt-click",function(){d=!0,$(".pay-money-span").text($(".pay-money-span").data("oldprice")),getCookie("UserName")?(c=$(this).data("id"),t(c)):window.csdn.loginBox.show()}),s.payCode.on("click",".renovate",function(){t(c||$(this).parent().data("id"))}),s.btClose.on("click",function(){s.payCode.fadeOut(function(){s.boxshadow.fadeOut()})});var l='<div class="renovate">    <img src="'+blogUrl+'static_files/static_blog/images/pay-time-out.png">    <span>点击重新获取</span></div>',r='<img class="repeat-again" src="'+blogUrl+'static_files/static_blog/images/pay-time-out.png"><span class="text">点击重新获取</span>'});